const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}};v();const a=JSON.parse(localStorage.getItem("users")),l=document.getElementById("table"),k=n=>a.find(e=>e.id===Number(n));function s(n,e){n.forEach(t=>{const d=document.createElement("tr");d.className="description opener",d.innerHTML=`
      <td class="description__modal sort-name" userid=${t.id}>${t.name}</td>
      <td>${t.username}</td>
      <td>${t.email}</td>
      <td class="description__website">${t.website}</td>
      <td class="remover">
        <button getid="${t.id}" class="remover__button">\u{1F5D9}</button>
      </td>
    `,e.appendChild(d)});const i=document.querySelectorAll(".sort-name"),c=document.querySelector(".details__window-items"),o=document.getElementById("more");for(let t=0;t<i.length;t++)i[t].onclick=()=>{const d=k(i[t].getAttribute("userid")),m=document.createElement("div");m.className="new-modal",m.innerHTML=`
                <p>${d.address.zipcode}, ${d.address.city} ${d.address.street}</p>
            `,o.style.display="block",c.appendChild(m)};let r=document.querySelectorAll(".remover__button");for(let t=0;t<r.length;t++)r[t].onclick=()=>{const d=JSON.parse(localStorage.getItem("users")),m=d.findIndex(p=>p.id===Number(r[t].getAttribute("getid")));d.splice(m,1),console.log(d),localStorage.setItem("users",JSON.stringify(d));const g=document.querySelectorAll("tr.opener");for(let p=0;p<g.length;p++)g[p].remove();s(JSON.parse(localStorage.getItem("users")),l)}}const S=document.getElementById("userForm"),f=document.getElementById("addName"),x=document.getElementById("addUserName"),b=document.getElementById("addEmail"),y=document.getElementById("addWebsite"),h=document.getElementById("addCity"),w=document.getElementById("addStreet"),_=document.getElementById("addZip"),I=document.getElementById("adder"),u=document.getElementById("addModal"),E=document.getElementById("closer");I.addEventListener("click",function(){u.style.display="block"});E.onclick=()=>{u.style.display="none"};function B(){f.value="",x.value="",b.value="",y.value="",h.value="",w.value="",_.value=""}S.onsubmit=n=>{n.preventDefault();const e={},i=a.map(t=>t.id),c=Math.max(...i);console.log(i),e.name=f.value,e.username=x.value,e.email=b.value,e.website=y.value,e.id=c+1,e.address={},e.address.zipcode=_.value,e.address.city=h.value,e.address.street=w.value;const o=JSON.parse(localStorage.getItem("users"));o.push(e),localStorage.setItem("users",JSON.stringify(o));const r=document.querySelectorAll("tr.opener");for(let t=0;t<r.length;t++)r[t].remove();s(o,l),u.style.display="none",B()};const N="https://jsonplaceholder.typicode.com",j=async()=>{const e=await(await fetch(`${N}/users`)).json();JSON.parse(localStorage.getItem("users"))||await localStorage.setItem("users",JSON.stringify(e)),await s(JSON.parse(localStorage.getItem("users")),l)};j();const O=document.getElementById("more"),q=document.querySelector(".closer-2");q.onclick=()=>{O.style.display="none",document.querySelector(".new-modal").remove()};const z=document.getElementById("name"),A=document.getElementById("username"),$=document.getElementById("email"),J=document.getElementById("website");z.onclick=()=>{a.sort((e,i)=>e.name.localeCompare(i.name));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,l)};A.onclick=()=>{a.sort((e,i)=>e.username.localeCompare(i.username));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,l)};$.onclick=()=>{a.sort((e,i)=>e.email.localeCompare(i.email));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,l)};J.onclick=()=>{a.sort((e,i)=>e.website.localeCompare(i.website));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,l)};
