const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}};S();const g=JSON.parse(localStorage.getItem("users")),l=document.getElementById("table"),v=i=>g.find(e=>e.id===Number(i));function s(i,e){i.forEach(o=>{const a=document.createElement("tr");a.className="description opener",a.innerHTML=`
      <td class="description__modal sort-name" userid=${o.id}>${o.name}</td>
      <td>${o.username}</td>
      <td>${o.email}</td>
      <td class="description__website">${o.website}</td>
      <td class="remover">
        <button getid="${o.id}" class="remover__button">\u{1F5D9}</button>
      </td>
    `,e.appendChild(a)});const t=document.querySelectorAll(".sort-name"),d=document.querySelector(".details__window-items"),n=document.getElementById("more");for(let o=0;o<t.length;o++)t[o].onclick=()=>{const a=v(t[o].getAttribute("userid")),c=document.createElement("div");c.className="new-modal",c.innerHTML=`
                <p>${a.address.zipcode}, ${a.address.city} ${a.address.street}</p>
            `,n.style.display="block",d.appendChild(c)};let r=document.querySelectorAll(".remover__button");for(let o=0;o<r.length;o++)r[o].onclick=()=>{const a=JSON.parse(localStorage.getItem("users")),c=a.findIndex(m=>m.id===Number(r[o].getAttribute("getid")));a.splice(c,1),console.log(a),localStorage.setItem("users",JSON.stringify(a));const u=document.querySelectorAll("tr.opener");for(let m=0;m<u.length;m++)u[m].remove();s(JSON.parse(localStorage.getItem("users")),l)}}const k=document.getElementById("userForm"),f=document.getElementById("addName"),x=document.getElementById("addUserName"),b=document.getElementById("addEmail"),y=document.getElementById("addWebsite"),h=document.getElementById("addCity"),w=document.getElementById("addStreet"),_=document.getElementById("addZip"),I=document.getElementById("adder"),p=document.getElementById("addModal"),E=document.getElementById("closer");I.addEventListener("click",function(){p.style.display="block"});E.onclick=()=>{p.style.display="none"};function B(){f.value="",x.value="",b.value="",y.value="",h.value="",w.value="",_.value=""}k.onsubmit=i=>{i.preventDefault();const e={},t=g.map(o=>o.id),d=Math.max(...t);console.log(t),e.name=f.value,e.username=x.value,e.email=b.value,e.website=y.value,e.id=d+1,e.address={},e.address.zipcode=_.value,e.address.city=h.value,e.address.street=w.value;const n=JSON.parse(localStorage.getItem("users"));n.push(e),localStorage.setItem("users",JSON.stringify(n));const r=document.querySelectorAll("tr.opener");for(let o=0;o<r.length;o++)r[o].remove();s(n,l),p.style.display="none",B()};const N="https://jsonplaceholder.typicode.com",O=async()=>{const e=await(await fetch(`${N}/users`)).json();JSON.parse(localStorage.getItem("users"))||await localStorage.setItem("users",JSON.stringify(e)),await s(JSON.parse(localStorage.getItem("users")),l)};O();const j=document.getElementById("more"),J=document.querySelector(".closer-2");J.onclick=()=>{j.style.display="none",document.querySelector(".new-modal").remove()};const q=document.getElementById("name"),z=document.getElementById("username"),A=document.getElementById("email"),$=document.getElementById("website");q.onclick=()=>{const i=JSON.parse(localStorage.getItem("users")).sort((t,d)=>t.name.localeCompare(d.name)),e=document.querySelectorAll("tr.opener");for(let t=0;t<e.length;t++)e[t].remove();s(i,l)};z.onclick=()=>{const i=JSON.parse(localStorage.getItem("users")).sort((t,d)=>t.username.localeCompare(d.username)),e=document.querySelectorAll("tr.opener");for(let t=0;t<e.length;t++)e[t].remove();s(i,l)};A.onclick=()=>{const i=JSON.parse(localStorage.getItem("users")).sort((t,d)=>t.email.localeCompare(d.email)),e=document.querySelectorAll("tr.opener");for(let t=0;t<e.length;t++)e[t].remove();s(i,l)};$.onclick=()=>{const i=JSON.parse(localStorage.getItem("users")).sort((t,d)=>t.website.localeCompare(d.website)),e=document.querySelectorAll("tr.opener");for(let t=0;t<e.length;t++)e[t].remove();s(i,l)};
