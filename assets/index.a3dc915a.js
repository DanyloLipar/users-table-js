const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function l(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=l(o);fetch(o.href,r)}};v();const a=JSON.parse(localStorage.getItem("users")),i=document.getElementById("table"),k=n=>a.find(e=>e.id===Number(n));function s(n,e){n.forEach(t=>{const d=document.createElement("tr");d.className="description opener",d.innerHTML=`
      <td class="description__modal sort-name" userid=${t.id}>${t.name}</td>
      <td>${t.username}</td>
      <td>${t.email}</td>
      <td>${t.website}</td>
      <td class="remover">
        <button getid="${t.id}" class="remover__button">Remove</button>
      </td>
    `,e.appendChild(d)});const l=document.querySelectorAll(".sort-name"),c=document.querySelector(".details__window-items"),o=document.getElementById("more");for(let t=0;t<l.length;t++)l[t].onclick=()=>{const d=k(l[t].getAttribute("userid")),m=document.createElement("div");m.className="new-modal",m.innerHTML=`
                <p>${d.address.zipcode}, ${d.address.city} ${d.address.street}</p>
            `,o.style.display="block",c.appendChild(m)};let r=document.querySelectorAll(".remover__button");for(let t=0;t<r.length;t++)r[t].onclick=()=>{const d=JSON.parse(localStorage.getItem("users")),m=d.findIndex(u=>u.id===Number(r[t].getAttribute("getid")));d.splice(m,1),console.log(d),localStorage.setItem("users",JSON.stringify(d));const g=document.querySelectorAll("tr.opener");for(let u=0;u<g.length;u++)g[u].remove();s(JSON.parse(localStorage.getItem("users")),i)}}const S=document.getElementById("userForm"),f=document.getElementById("addName"),b=document.getElementById("addUserName"),y=document.getElementById("addEmail"),x=document.getElementById("addWebsite"),h=document.getElementById("addCity"),_=document.getElementById("addStreet"),w=document.getElementById("addZip"),I=document.getElementById("adder"),p=document.getElementById("addModal"),E=document.getElementById("closer");I.addEventListener("click",function(){p.style.display="block"});E.onclick=()=>{p.style.display="none"};function B(){f.value="",b.value="",y.value="",x.value="",h.value="",_.value="",w.value=""}S.onsubmit=n=>{n.preventDefault();const e={},l=a.map(t=>t.id),c=Math.max(...l);console.log(l),e.name=f.value,e.username=b.value,e.email=y.value,e.website=x.value,e.id=c+1,e.address={},e.address.zipcode=w.value,e.address.city=h.value,e.address.street=_.value;const o=JSON.parse(localStorage.getItem("users"));o.push(e),localStorage.setItem("users",JSON.stringify(o));const r=document.querySelectorAll("tr.opener");for(let t=0;t<r.length;t++)r[t].remove();s(o,i),p.style.display="none",B()};const N="https://jsonplaceholder.typicode.com",O=async()=>{const e=await(await fetch(`${N}/users`)).json();JSON.parse(localStorage.getItem("users"))||await localStorage.setItem("users",JSON.stringify(e)),await s(JSON.parse(localStorage.getItem("users")),i)};O();const q=document.getElementById("more"),A=document.querySelector(".closer-2");A.onclick=()=>{q.style.display="none",document.querySelector(".new-modal").remove()};const j=document.getElementById("name"),$=document.getElementById("username"),J=document.getElementById("email"),L=document.getElementById("website");j.onclick=()=>{a.sort((e,l)=>e.name.localeCompare(l.name));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,i)};$.onclick=()=>{a.sort((e,l)=>e.username.localeCompare(l.username));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,i)};J.onclick=()=>{a.sort((e,l)=>e.email.localeCompare(l.email));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,i)};L.onclick=()=>{a.sort((e,l)=>e.website.localeCompare(l.website));const n=document.querySelectorAll("tr.opener");for(let e=0;e<n.length;e++)n[e].remove();s(a,i)};
